"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[250],{89250:function(e,n,t){t.r(n),t.d(n,{default:function(){return x}});var s=t(42982),a=t(74165),r=t(15861),c=t(70885),i=t(47313),d=t(90108),o=t(97890),l=t(8442),u=t(76229),h=(t(85554),(0,t(75045).ZP)()),f=t(48843),p=t(46417),x=function(){var e=JSON.parse(localStorage.getItem("projectId")),n=JSON.parse(localStorage.getItem("userToken")),t=(0,o.TH)(),x=(0,i.useState)([]),m=(0,c.Z)(x,2),v=m[0],j=m[1],g=(0,i.useState)(""),Z=(0,c.Z)(g,2),N=Z[0],k=Z[1],w=(0,i.useState)([]),S=(0,c.Z)(w,2),b=S[0],C=S[1];(0,i.useEffect)((function(){function n(){return(n=(0,r.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.Z.get("/getChatDetails/".concat(e)).then((function(e){console.log(e.data,"Response"),j(e.data)}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[t,b]),(0,i.useEffect)((function(){var n=e;h.emit("room",n)}),[]),(0,i.useEffect)((function(){h.on("message",(function(e){C(e)}))}),[h]);var y=function(){var t=(0,r.Z)((0,a.Z)().mark((function t(r){var c,i,o;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),c={chatId:e,senderId:n._id,senderName:n.name,text:N},t.prev=2,t.next=5,d.Z.post("/addChat",c);case 5:i=t.sent,o=i.data,j([].concat((0,s.Z)(v),[o])),k(""),h.emit("sendMessage",c,e),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}();return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("div",{className:"ChatBox-container",children:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"chat-header",children:[(0,p.jsx)("div",{className:"follower",children:(0,p.jsx)("div",{children:(0,p.jsx)("div",{className:"name",style:{fontSize:"0.8rem"},children:(0,p.jsx)("span",{})})})}),(0,p.jsx)("hr",{style:{width:"85%",border:"0.1px solid #ececec"}})]}),(0,p.jsx)(f.ZP,{children:(0,p.jsx)("div",{className:"chat-body",children:v.map((function(e){return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:e.senderId===n._id?"message own":"message",children:[(0,p.jsx)("span",{children:e.text}),(0,p.jsx)("span",{children:(0,l.WU)(e.createdAt)}),e.senderName]})})}))})}),(0,p.jsxs)("div",{className:"chat-sender",children:[(0,p.jsx)("div",{children:"+"}),(0,p.jsx)(u.Z,{value:N,onChange:function(e){k(e)}}),(0,p.jsx)("div",{className:"send-button button",onClick:y,children:"Send"})]})]})})})}}}]);