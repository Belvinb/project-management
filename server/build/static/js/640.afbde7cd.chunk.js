"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[640],{65714:function(e,t,n){n.r(t);var a=n(74165),r=n(15861),i=n(70885),o=n(47313),s=n(33419),c=n(90108),l=n(97890),d=n(85554),u=n(56778),p=n(51405),m=n(69099),h=n(50443),v=n(23433),f=n(46417),g=[{value:"pending",label:"pending"},{value:"ongoing",label:"ongoing"},{value:"review",label:"review"}];t.default=function(){var e=(0,d.v9)((function(e){return e.task})).taskDetails,t=JSON.parse(localStorage.getItem("projectId")),n=JSON.parse(localStorage.getItem("userToken")),Z=(0,l.TH)(),b=(0,o.useState)([]),x=(0,i.Z)(b,2),y=x[0],k=x[1],j=(0,o.useState)(""),C=(0,i.Z)(j,2),w=C[0],S=C[1],I=o.useState(!1),T=(0,i.Z)(I,2),D=T[0],O=T[1],M=o.useState(""),F=(0,i.Z)(M,2),L=F[0],B=F[1],V=(0,d.I0)();(0,o.useEffect)((function(){function e(){return(e=(0,r.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get("/viewAssignedTasks?projectId=".concat(t,"&email=").concat(n.email)).then((function(e){k(e.data)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[Z,e,t]);var Y=[{name:"Title",selector:function(e){return e.taskTitle}},{name:"Description",selector:function(e){return e.taskDescription}},{name:"StartDate",selector:function(e){return e.startDate}},{name:"endDate",selector:function(e){return e.endDate}},{name:"status",selector:function(e){return e.status}},{name:"change status",cell:function(e){return(0,f.jsx)(u.Z,{id:"outlined-select-currency",select:!0,value:e.status?e.status:w,onChange:function(t){return function(e,t){S(e.target.value);var n={status:e.target.value,taskId:t};V((0,h.kj)(n))}(t,e._id)},children:g.map((function(e){return(0,f.jsx)(p.Z,{value:e.value,children:e.label},e.value)}))})}},{name:"Details",cell:function(e){return(0,f.jsx)(m.Z,{style:{backgroundColor:"White",color:"Blue",border:"1px solid blue"},onClick:function(){var t;t=e._id,B(t),O(!0)},children:"open"})}}];return(0,f.jsxs)(f.Fragment,{children:[D?(0,f.jsx)(v.Z,{open:D,handleClose:function(){return O(!1)},taskId:L}):"",(0,f.jsx)(s.ZP,{title:"Assigned Task",columns:Y,data:y,pagination:!0,fixedHeader:!0,highlightOnHover:!0})]})}},23433:function(e,t,n){var a=n(1413),r=n(74165),i=n(15861),o=n(70885),s=n(47313),c=n(69099),l=n(20209),d=n(57829),u=n(56778),p=n(61113),m=n(9019),h=n(82295),v=n(90108),f=n(19537),g=n(85554),Z=n(50443),b=n(75627),x=n(33419),y=n(70816),k=n.n(y),j=n(46417),C={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",width:"50rem",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:2,margin:"auto",overflowY:"scroll",height:"500px"};t.Z=function(e){var t,n,y=e.open,w=e.handleClose,S=e.taskId,I=JSON.parse(localStorage.getItem("userToken")),T=s.useState({}),D=(0,o.Z)(T,2),O=D[0],M=D[1],F=s.useState(!1),L=(0,o.Z)(F,2),B=L[0],V=L[1],Y=s.useState(""),H=(0,o.Z)(Y,2),N=H[0],P=H[1],G=(0,g.I0)(),R=(0,g.v9)((function(e){return e.task})).singleTask;s.useEffect((function(){function e(){return(e=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V(!0),e.prev=1,e.next=4,v.Z.get("/getSingleTaskDetails/".concat(S)).then((function(e){console.log(e.data),M(e.data[0]),V(!1)}));case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[S,R]);function W(){var e=s.useState(!1),t=(0,o.Z)(e,2),n=t[0],r=t[1],i=function(){r(!1)},p=(0,b.cI)(),m=p.register,h=p.handleSubmit;p.formState.errors;return(0,j.jsxs)(s.Fragment,{children:[(0,j.jsx)(c.Z,{onClick:function(){r(!0)},children:"Create"}),(0,j.jsx)(l.Z,{hideBackdrop:!0,open:n,onClose:i,"aria-labelledby":"child-modal-title","aria-describedby":"child-modal-description",children:(0,j.jsxs)(d.Z,{sx:(0,a.Z)((0,a.Z)({},C),{},{width:200,height:260}),component:"form",onSubmit:h((function(e){console.log(e,"subtask data");var t={subtask:e.subTask,taskId:O._id,createdOn:k()().format("DD-MM-YYYY"),createdBy:I._id};console.log("details",t),G((0,Z.y3)(t))})),children:[(0,j.jsx)("h4",{id:"child-modal-title",children:"SubTask Description"}),(0,j.jsx)(u.Z,(0,a.Z)({name:"subTask",id:"subTask"},m("subTask",{required:!0}))),(0,j.jsx)(c.Z,{type:"submit",children:"Add"}),(0,j.jsx)(c.Z,{onClick:i,children:"Close"})]})})]})}return(0,j.jsx)("div",{children:(0,j.jsx)(l.Z,{open:y,onClose:w,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,j.jsxs)(d.Z,{sx:C,xs:8,md:12,children:[B&&(0,j.jsx)(f.Z,{}),(0,j.jsx)(p.Z,{id:"modal-modal-title",variant:"h6",component:"h2",mb:3,children:O.taskTitle}),(0,j.jsxs)(m.ZP,{container:!0,children:[(0,j.jsxs)(m.ZP,{item:!0,md:6,children:[(0,j.jsx)("h4",{children:"Description:"}),(0,j.jsx)("p",{style:{width:"180px",overflowWrap:"break-word"},children:O.taskDescription}),(0,j.jsx)("hr",{style:{marginTop:"1.2rem",width:"50%",marginRight:"10rem"}}),(0,j.jsxs)("h4",{style:{marginTop:"0.5rem"},children:["SubTasks ",(0,j.jsx)(W,{})]}),(0,j.jsx)(x.ZP,{columns:[{selector:function(e){return e.subtask}}],data:null===(t=O.subTasks)||void 0===t?void 0:t.reverse(),highlightOnHover:!0,noHeader:!0})]}),(0,j.jsxs)(m.ZP,{item:!0,md:6,children:[(0,j.jsx)("h4",{children:"comments"}),(0,j.jsx)(u.Z,{margin:"normal",fullWidth:!0,multiline:!0,name:"comment",rows:4,onChange:function(e){P(e.target.value)},value:N}),(0,j.jsx)(c.Z,{onClick:function(){console.log(N,"comment");var e={commentBody:N,taskinfo:S,userName:I.name,Date:k()().format("DD-MM-YYYY"),Time:k()().format("hh:mm")};console.log(e,"body"),G((0,Z.Ir)(e)),P("")},children:"Comment"}),(0,j.jsx)("div",{style:{height:"150px",overflowY:"scroll"},children:null===(n=O.comments)||void 0===n?void 0:n.slice(0).reverse().map((function(e,t){return(0,j.jsxs)(h.Z,{style:{marginTop:"10px",width:"350px",overflowWrap:"break-word"},elevation:5,children:[(0,j.jsx)("h4",{style:{fontSize:"20px",margin:"0",marginLeft:"5px"},children:e.userName}),(0,j.jsxs)("h6",{style:{fontSize:"13px",margin:"0",marginLeft:"5px"},children:[e.Date,"(",e.Time,")"]}),(0,j.jsx)("p",{style:{marginTop:"10px",padding:"2px"},children:e.commentBody})]},t)}))})]})]})]})})})}},99273:function(e,t,n){n.d(t,{V:function(){return r}});var a=n(32298);function r(e){return(0,a.Z)("MuiDivider",e)}var i=(0,n(77430).Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);t.Z=i},37363:function(e,t,n){n.d(t,{f:function(){return r}});var a=n(32298);function r(e){return(0,a.Z)("MuiListItemIcon",e)}var i=(0,n(77430).Z)("MuiListItemIcon",["root","alignItemsFlexStart"]);t.Z=i},11081:function(e,t,n){n.d(t,{L:function(){return r}});var a=n(32298);function r(e){return(0,a.Z)("MuiListItemText",e)}var i=(0,n(77430).Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);t.Z=i},51405:function(e,t,n){n.d(t,{Z:function(){return w}});var a=n(4942),r=n(63366),i=n(87462),o=n(47313),s=n(83061),c=n(21921),l=n(17551),d=n(17592),u=n(77342),p=n(51195),m=n(71848),h=n(24993),v=n(86983),f=n(99273),g=n(37363),Z=n(11081),b=n(32298);function x(e){return(0,b.Z)("MuiMenuItem",e)}var y=(0,n(77430).Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),k=n(46417),j=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex"],C=(0,d.ZP)(m.Z,{shouldForwardProp:function(e){return(0,d.FO)(e)||"classes"===e},name:"MuiMenuItem",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,i.Z)({},n.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!r.disableGutters&&{paddingLeft:16,paddingRight:16},r.divider&&{borderBottom:"1px solid ".concat((n.vars||n).palette.divider),backgroundClip:"padding-box"},(t={"&:hover":{textDecoration:"none",backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},(0,a.Z)(t,"&.".concat(y.selected),(0,a.Z)({backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,l.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)},"&.".concat(y.focusVisible),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.focusOpacity,"))"):(0,l.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)})),(0,a.Z)(t,"&.".concat(y.selected,":hover"),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / calc(").concat(n.vars.palette.action.selectedOpacity," + ").concat(n.vars.palette.action.hoverOpacity,"))"):(0,l.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.selectedOpacity,")"):(0,l.Fq)(n.palette.primary.main,n.palette.action.selectedOpacity)}}),(0,a.Z)(t,"&.".concat(y.focusVisible),{backgroundColor:(n.vars||n).palette.action.focus}),(0,a.Z)(t,"&.".concat(y.disabled),{opacity:(n.vars||n).palette.action.disabledOpacity}),(0,a.Z)(t,"& + .".concat(f.Z.root),{marginTop:n.spacing(1),marginBottom:n.spacing(1)}),(0,a.Z)(t,"& + .".concat(f.Z.inset),{marginLeft:52}),(0,a.Z)(t,"& .".concat(Z.Z.root),{marginTop:0,marginBottom:0}),(0,a.Z)(t,"& .".concat(Z.Z.inset),{paddingLeft:36}),(0,a.Z)(t,"& .".concat(g.Z.root),{minWidth:36}),t),!r.dense&&(0,a.Z)({},n.breakpoints.up("sm"),{minHeight:"auto"}),r.dense&&(0,i.Z)({minHeight:32,paddingTop:4,paddingBottom:4},n.typography.body2,(0,a.Z)({},"& .".concat(g.Z.root," svg"),{fontSize:"1.25rem"})))})),w=o.forwardRef((function(e,t){var n=(0,u.Z)({props:e,name:"MuiMenuItem"}),a=n.autoFocus,l=void 0!==a&&a,d=n.component,m=void 0===d?"li":d,f=n.dense,g=void 0!==f&&f,Z=n.divider,b=void 0!==Z&&Z,y=n.disableGutters,w=void 0!==y&&y,S=n.focusVisibleClassName,I=n.role,T=void 0===I?"menuitem":I,D=n.tabIndex,O=(0,r.Z)(n,j),M=o.useContext(p.Z),F={dense:g||M.dense||!1,disableGutters:w},L=o.useRef(null);(0,h.Z)((function(){l&&L.current&&L.current.focus()}),[l]);var B,V=(0,i.Z)({},n,{dense:F.dense,divider:b,disableGutters:w}),Y=function(e){var t=e.disabled,n=e.dense,a=e.divider,r=e.disableGutters,o=e.selected,s=e.classes,l={root:["root",n&&"dense",t&&"disabled",!r&&"gutters",a&&"divider",o&&"selected"]},d=(0,c.Z)(l,x,s);return(0,i.Z)({},s,d)}(n),H=(0,v.Z)(L,t);return n.disabled||(B=void 0!==D?D:-1),(0,k.jsx)(p.Z.Provider,{value:F,children:(0,k.jsx)(C,(0,i.Z)({ref:H,role:T,tabIndex:B,component:m,focusVisibleClassName:(0,s.Z)(Y.focusVisible,S)},O,{ownerState:V,classes:Y}))})}))}}]);